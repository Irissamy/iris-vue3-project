"use strict";(self["webpackChunkiris_vue3_project"]=self["webpackChunkiris_vue3_project"]||[]).push([[50],{4050:function(t,e,s){s.r(e),s.d(e,{default:function(){return lt}});var a=s(3396),i=s(7139),l=s(9242);const o={class:"container"},r={class:"row mt-4"},d={class:"col-md-7"},n={class:"table align-middle"},c=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"圖片"),(0,a._)("th",null,"商品名稱"),(0,a._)("th",null,"價格"),(0,a._)("th")])],-1),u={style:{width:"200px"}},p={key:1,style:{height:"100px","background-size":"cover","background-position":"center","background-repeat":"no-repeat","background-image":"url('data:image/png;base64,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')"}},g={href:"#",class:"text-dark"},h={key:0,class:"h5"},m={key:1,class:"h6"},b={key:2,class:"h5"},v={class:"btn-group btn-group-sm"},y=["onClick"],f=["disabled","onClick"],A={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},k=(0,a._)("span",{class:"visually-hidden"},"Loading...",-1),w=[k],_={class:"col-md-5"},C={class:"sticky-top"},E={class:"table align-middle"},D=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th"),(0,a._)("th",null,"品名"),(0,a._)("th",{style:{width:"110px"}},"數量"),(0,a._)("th",null,"單價")])],-1),I=["disabled","onClick"],L=(0,a._)("i",{class:"bi bi-x"},null,-1),z=[L],V={key:0,class:"text-success"},x={class:"input-group input-group-sm"},q=["disabled","onUpdate:modelValue","onChange"],O={class:"input-group-text"},U={class:"text-end"},B={key:0,class:"text-success"},X=(0,a._)("td",{colspan:"3",class:"text-end"},"總計",-1),J={class:"text-end"},Q={key:0},H=(0,a._)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),j={class:"text-end text-success"},P={class:"input-group mb-3 input-group-sm"},W={class:"input-group-append"},M={class:"my-5 row justify-content-center"},S={class:"mb-3"},Y=(0,a._)("label",{for:"email",class:"form-label"},"Email",-1),G={class:"mb-3"},K=(0,a._)("label",{for:"name",class:"form-label"},"收件人姓名",-1),F={class:"mb-3"},T=(0,a._)("label",{for:"tel",class:"form-label"},"收件人電話",-1),N={class:"mb-3"},Z=(0,a._)("label",{for:"address",class:"form-label"},"收件人地址",-1),R={class:"mb-3"},$=(0,a._)("label",{for:"message",class:"form-label"},"留言",-1),tt=(0,a._)("div",{class:"text-end"},[(0,a._)("button",{class:"btn btn-danger"},"送出訂單")],-1);function et(t,e,s,k,L,et){const st=(0,a.up)("LoadingOverlay"),at=(0,a.up)("VField"),it=(0,a.up)("VErrorMessage"),lt=(0,a.up)("VForm");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(st,{active:L.isLoading},null,8,["active"]),(0,a._)("div",o,[(0,a._)("div",r,[(0,a._)("div",d,[(0,a._)("table",n,[c,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(L.productList,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id},[(0,a._)("td",u,[t.imageUrl?((0,a.wg)(),(0,a.iD)("div",{key:0,style:(0,i.j5)([{height:"100px","background-size":"cover","background-position":"center","background-repeat":"no-repeat"},{backgroundImage:`url(${t.imageUrl})`}])},null,4)):((0,a.wg)(),(0,a.iD)("div",p))]),(0,a._)("td",null,[(0,a._)("a",g,(0,i.zw)(t.title),1)]),(0,a._)("td",null,[t.price?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",h,(0,i.zw)(t.origin_price)+"元",1)),t.price?((0,a.wg)(),(0,a.iD)("del",m,"原價 "+(0,i.zw)(t.origin_price)+" 元",1)):(0,a.kq)("",!0),t.price?((0,a.wg)(),(0,a.iD)("div",b,"現在只要 "+(0,i.zw)(t.price)+" 元",1)):(0,a.kq)("",!0)]),(0,a._)("td",null,[(0,a._)("div",v,[(0,a._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e=>et.getProductsDetail(t)}," 查看更多 ",8,y),(0,a._)("button",{type:"button",class:"btn btn-outline-danger",disabled:this.status.loadingItem===t.id,onClick:e=>et.addToCart(t)},[this.status.loadingItem===t.id?((0,a.wg)(),(0,a.iD)("div",A,w)):(0,a.kq)("",!0),(0,a.Uk)(" 加到購物車 ")],8,f)])])])))),128))])])]),(0,a._)("div",_,[(0,a._)("div",C,[(0,a._)("table",E,[D,(0,a._)("tbody",null,[L.cartList.carts?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(L.cartList.carts,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,[(0,a._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:L.status.loadingItem===e.id,onClick:t=>et.deleteCart(e)},z,8,I)]),(0,a._)("td",null,[(0,a.Uk)((0,i.zw)(e.product.title)+" ",1),e.coupon?((0,a.wg)(),(0,a.iD)("div",V," 已套用優惠券 ")):(0,a.kq)("",!0)]),(0,a._)("td",null,[(0,a._)("div",x,[(0,a.wy)((0,a._)("input",{type:"number",min:"1",class:"form-control",disabled:e.id===L.status.loadingItem,"onUpdate:modelValue":t=>e.qty=t,onChange:t=>et.updateCart(e)},null,40,q),[[l.nr,e.qty,void 0,{number:!0}]]),(0,a._)("div",O,"/ "+(0,i.zw)(e.product.unit),1)])]),(0,a._)("td",U,[e.final_total!==e.total?((0,a.wg)(),(0,a.iD)("small",B,"折扣價：")):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,i.zw)(t.$filters.currency(e.final_total)),1)])])))),128)):(0,a.kq)("",!0)]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[X,(0,a._)("td",J,(0,i.zw)(t.$filters.currency(L.cartList.total)),1)]),L.cartList.final_total!==L.cartList.total?((0,a.wg)(),(0,a.iD)("tr",Q,[H,(0,a._)("td",j,(0,i.zw)(t.$filters.currency(L.cartList.final_total)),1)])):(0,a.kq)("",!0)])]),(0,a._)("div",P,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[0]||(e[0]=t=>L.cuponCode=t)},null,512),[[l.nr,L.cuponCode]]),(0,a._)("div",W,[(0,a._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=(...t)=>et.useCupon&&et.useCupon(...t))}," 套用優惠碼 ")])])])])]),(0,a._)("div",M,[(0,a.Wm)(lt,{class:"col-md-6",onSubmit:et.createOrder},{default:(0,a.w5)((({errors:t})=>[(0,a._)("div",S,[Y,(0,a.Wm)(at,{id:"email",name:"email",type:"email",class:(0,i.C_)(["form-control",{"is-invalid":t["email"]}]),rules:"email|required",placeholder:"請輸入 Email",modelValue:L.form.user.email,"onUpdate:modelValue":e[2]||(e[2]=t=>L.form.user.email=t)},null,8,["class","modelValue"]),(0,a.Wm)(it,{name:"email",class:"invalid-feedback"})]),(0,a._)("div",G,[K,(0,a.Wm)(at,{id:"name",name:"姓名",type:"text",class:(0,i.C_)(["form-control",{"is-invalid":t["姓名"]}]),rules:"required",placeholder:"請輸入姓名",modelValue:L.form.user.name,"onUpdate:modelValue":e[3]||(e[3]=t=>L.form.user.name=t)},null,8,["class","modelValue"]),(0,a.Wm)(it,{name:"姓名",class:"invalid-feedback"})]),(0,a._)("div",F,[T,(0,a.Wm)(at,{id:"tel",name:"電話",type:"tel",class:(0,i.C_)(["form-control",{"is-invalid":t["電話"]}]),rules:"required",placeholder:"請輸入電話",modelValue:L.form.user.tel,"onUpdate:modelValue":e[4]||(e[4]=t=>L.form.user.tel=t)},null,8,["class","modelValue"]),(0,a.Wm)(it,{name:"電話",class:"invalid-feedback"})]),(0,a._)("div",N,[Z,(0,a.Wm)(at,{id:"address",name:"地址",type:"text",class:(0,i.C_)(["form-control",{"is-invalid":t["地址"]}]),rules:"required",placeholder:"請輸入地址",modelValue:L.form.user.address,"onUpdate:modelValue":e[5]||(e[5]=t=>L.form.user.address=t)},null,8,["class","modelValue"]),(0,a.Wm)(it,{name:"地址",class:"invalid-feedback"})]),(0,a._)("div",R,[$,(0,a.wy)((0,a._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[6]||(e[6]=t=>L.form.message=t)},null,512),[[l.nr,L.form.message]])]),tt])),_:1},8,["onSubmit"])])])],64)}s(7658);var st={data(){return{productList:{},isLoading:!1,status:{loadingItem:""},cartList:{},cuponCode:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/iris-lai-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{t.data.success?(this.productList=t.data.products,this.isLoading=!1):console.log(t.data.messages)}))},getProductsDetail(t){this.$router.push(`/userDashboard/userProduct/${t.id}`)},addToCart(t){const e="https://vue3-course-api.hexschool.io/api/iris-lai-api/cart";this.status.loadingItem=t.id;const s={product_id:t.id,qty:1};this.$http.post(e,{data:s}).then((t=>{this.getCartList(),this.status.loadingItem=""}))},getCartList(){const t="https://vue3-course-api.hexschool.io/api/iris-lai-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cartList=t.data.data,this.isLoading=!1}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/iris-lai-api/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:s}).then((t=>{this.getCartList(),this.status.loadingItem=""}))},deleteCart(t){const e=`https://vue3-course-api.hexschool.io/api/iris-lai-api/cart/${t.id}`;this.status.loadingItem=t.id,this.$http.delete(e).then((t=>{this.getCartList(),this.status.loadingItem=""}))},useCupon(){const t="https://vue3-course-api.hexschool.io/api/iris-lai-api/coupon",e={code:this.cuponCode};this.$http.post(t,{data:e}).then((t=>{this.getCartList()}))},createOrder(){const t="https://vue3-course-api.hexschool.io/api/iris-lai-api/order",e=this.form;this.$http.post(t,{data:e}).then((t=>{console.log(t)}))}},created(){this.getProducts(),this.getCartList()}},at=s(89);const it=(0,at.Z)(st,[["render",et]]);var lt=it}}]);
//# sourceMappingURL=50.217ae8b4.js.map