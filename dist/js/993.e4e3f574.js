"use strict";(self["webpackChunkiris_vue3_project"]=self["webpackChunkiris_vue3_project"]||[]).push([[993],{7993:function(t,s,i){i.r(s),i.d(s,{default:function(){return W}});var e=i(3396),a=i(7139),l=i(9242);const n={class:"container"},o={class:"row mt-4"},d={class:"col-md-7"},c={class:"table align-middle"},r=(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",null,"圖片"),(0,e._)("th",null,"商品名稱"),(0,e._)("th",null,"價格"),(0,e._)("th")])],-1),u={style:{width:"200px"}},g={key:1,style:{height:"100px","background-size":"cover","background-position":"center","background-repeat":"no-repeat","background-image":"url('data:image/png;base64,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')"}},p={href:"#",class:"text-dark"},h={key:0,class:"h5"},b={key:1,class:"h6"},A={key:2,class:"h5"},y={class:"btn-group btn-group-sm"},k=["onClick"],v=["disabled","onClick"],w={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},D=(0,e._)("span",{class:"visually-hidden"},"Loading...",-1),E=[D],m={class:"col-md-5"},I={class:"sticky-top"},L={class:"table align-middle"},z=(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th"),(0,e._)("th",null,"品名"),(0,e._)("th",{style:{width:"110px"}},"數量"),(0,e._)("th",null,"單價")])],-1),_=["disabled","onClick"],C=(0,e._)("i",{class:"bi bi-x"},null,-1),f=[C],B={key:0,class:"text-success"},O={class:"input-group input-group-sm"},q=["disabled","onUpdate:modelValue","onChange"],x={class:"input-group-text"},X={class:"text-end"},U={key:0,class:"text-success"},J=(0,e._)("td",{colspan:"3",class:"text-end"},"總計",-1),Q={class:"text-end"},H={key:0},j=(0,e._)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),P={class:"text-end text-success"},V=(0,e._)("div",{class:"input-group mb-3 input-group-sm"},[(0,e._)("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼"}),(0,e._)("div",{class:"input-group-append"},[(0,e._)("button",{class:"btn btn-outline-secondary",type:"button"}," 套用優惠碼 ")])],-1);function M(t,s,i,D,C,M){const S=(0,e.up)("LoadingOverlay");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(S,{active:C.isLoading},null,8,["active"]),(0,e._)("div",n,[(0,e._)("div",o,[(0,e._)("div",d,[(0,e._)("table",c,[r,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(C.productList,(t=>((0,e.wg)(),(0,e.iD)("tr",{key:t.id},[(0,e._)("td",u,[t.imageUrl?((0,e.wg)(),(0,e.iD)("div",{key:0,style:(0,a.j5)([{height:"100px","background-size":"cover","background-position":"center","background-repeat":"no-repeat"},{backgroundImage:`url(${t.imageUrl})`}])},null,4)):((0,e.wg)(),(0,e.iD)("div",g))]),(0,e._)("td",null,[(0,e._)("a",p,(0,a.zw)(t.title),1)]),(0,e._)("td",null,[t.price?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("div",h,(0,a.zw)(t.origin_price)+"元",1)),t.price?((0,e.wg)(),(0,e.iD)("del",b,"原價 "+(0,a.zw)(t.origin_price)+" 元",1)):(0,e.kq)("",!0),t.price?((0,e.wg)(),(0,e.iD)("div",A,"現在只要 "+(0,a.zw)(t.price)+" 元",1)):(0,e.kq)("",!0)]),(0,e._)("td",null,[(0,e._)("div",y,[(0,e._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:s=>M.getProductsDetail(t)}," 查看更多 ",8,k),(0,e._)("button",{type:"button",class:"btn btn-outline-danger",disabled:this.status.loadingItem===t.id,onClick:s=>M.addToCart(t)},[this.status.loadingItem===t.id?((0,e.wg)(),(0,e.iD)("div",w,E)):(0,e.kq)("",!0),(0,e.Uk)(" 加到購物車 ")],8,v)])])])))),128))])])]),(0,e._)("div",m,[(0,e._)("div",I,[(0,e._)("table",L,[z,(0,e._)("tbody",null,[C.cartList.carts?((0,e.wg)(!0),(0,e.iD)(e.HY,{key:0},(0,e.Ko)(C.cartList.carts,(t=>((0,e.wg)(),(0,e.iD)("tr",{key:t.id},[(0,e._)("td",null,[(0,e._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:C.status.loadingItem===t.id,onClick:s=>M.deleteCart(t)},f,8,_)]),(0,e._)("td",null,[(0,e.Uk)((0,a.zw)(t.product.title)+" ",1),t.coupon?((0,e.wg)(),(0,e.iD)("div",B," 已套用優惠券 ")):(0,e.kq)("",!0)]),(0,e._)("td",null,[(0,e._)("div",O,[(0,e.wy)((0,e._)("input",{type:"number",min:"1",class:"form-control",disabled:t.id===C.status.loadingItem,"onUpdate:modelValue":s=>t.qty=s,onChange:s=>M.updateCart(t)},null,40,q),[[l.nr,t.qty,void 0,{number:!0}]]),(0,e._)("div",x,"/ "+(0,a.zw)(t.product.unit),1)])]),(0,e._)("td",X,[t.final_total!==t.total?((0,e.wg)(),(0,e.iD)("small",U,"折扣價：")):(0,e.kq)("",!0),(0,e.Uk)(" "+(0,a.zw)(t.final_total),1)])])))),128)):(0,e.kq)("",!0)]),(0,e._)("tfoot",null,[(0,e._)("tr",null,[J,(0,e._)("td",Q,(0,a.zw)(C.cartList.total),1)]),C.cartList.final_total!==C.cartList.total?((0,e.wg)(),(0,e.iD)("tr",H,[j,(0,e._)("td",P,(0,a.zw)(C.cartList.final_total),1)])):(0,e.kq)("",!0)])]),V])])])])],64)}i(7658);var S={data(){return{productList:{},isLoading:!1,status:{loadingItem:""},cartList:{}}},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/iris-lai-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{t.data.success?(this.productList=t.data.products,this.isLoading=!1):console.log(t.data.messages)}))},getProductsDetail(t){this.$router.push(`/userDashboard/userProduct/${t.id}`)},addToCart(t){const s="https://vue3-course-api.hexschool.io/api/iris-lai-api/cart";this.status.loadingItem=t.id;const i={product_id:t.id,qty:1};this.$http.post(s,{data:i}).then((t=>{this.getCartList(),this.status.loadingItem=""}))},getCartList(){const t="https://vue3-course-api.hexschool.io/api/iris-lai-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cartList=t.data.data,this.isLoading=!1}))},updateCart(t){const s=`https://vue3-course-api.hexschool.io/api/iris-lai-api/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const i={product_id:t.product_id,qty:t.qty};this.$http.put(s,{data:i}).then((t=>{this.getCartList(),this.status.loadingItem=""}))},deleteCart(t){const s=`https://vue3-course-api.hexschool.io/api/iris-lai-api/cart/${t.id}`;this.status.loadingItem=t.id,this.$http.delete(s).then((t=>{this.getCartList(),this.status.loadingItem=""}))}},created(){this.getProducts(),this.getCartList()}},Y=i(89);const G=(0,Y.Z)(S,[["render",M]]);var W=G}}]);
//# sourceMappingURL=993.e4e3f574.js.map